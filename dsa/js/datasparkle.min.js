(function(){"use strict";function t(t){this.offset=0;this.data="";this.container=t.container;this.opacityRange=t.opacityRange||[.1,.3];this.gridSize=t.gridSize||10;this.size=t.size||500;this.baseColor=t.baseColor||"#00b2a9";this.color=e.parseRgb(t.color||"#fff");this.fadeInDuration=t.fadeInDuration||1e3;this.blendingMode=t.blendingMode||"screen";e.get(t.source,this.init.bind(this))}window.addEventListener("load",function(){new t({source:"test.txt",container:document.getElementById("header"),opacityRange:[.1,.2],gridSize:10,size:500,baseColor:"#00b2a9",color:"#000",blendingMode:"hard-light",fadeInDuration:1e3})});var e={};e.get=function(e,t){var n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];var r;for(var i=0,s=n.length;i<s;i++){try{r=n[i]();break}catch(o){}}r.open("GET",e,true);r.onreadystatechange=function(){if(r.readyState==4){t(r.status==200?null:r.status,r.responseText||null)}};r.send()};e.scale=function(e,t){return function(n){return Math.max(t[0],Math.min(t[1],(t[0]*e[1]+n*t[1]-n*t[0]-t[1]*e[0])/(e[1]-e[0])))}};e.parseRgb=function(e){var t=e.match(/(([0-9a-z]{2})([0-9a-z]{2})([0-9a-z]{2}))|(([0-9a-z])([0-9a-z])([0-9a-z]))/);return{r:t[2]?parseInt(t[2],16):parseInt(t[6]+t[6],16),g:t[3]?parseInt(t[3],16):parseInt(t[7]+t[7],16),b:t[4]?parseInt(t[4],16):parseInt(t[8]+t[8],16)}};t.prototype.init=function(t,n){var r=this,i=Date.now(),s=e.scale([0,this.fadeInDuration],[0,this.opacityRange[0]]),o=e.scale([0,this.fadeInDuration],[0,this.opacityRange[1]]);this.data=n;(function u(){var t=Date.now()-i;r.offset=0;r.opacityScale=e.scale([0,255],[s(t),o(t)]);r.render();if(t<r.fadeInDuration){window.requestAnimationFrame(u)}})()};t.prototype.render=function(){var e=document.createElement("canvas"),t=e.getContext("2d");t.fillStyle=this.baseColor;t.fillRect(0,0,this.size,this.size);t.globalCompositeOperation=this.blendingMode;for(var n=0;n<this.size;n+=this.gridSize){for(var r=0;r<this.size;r+=this.gridSize){t.fillStyle="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.getOpacity()+")";t.fillRect(n+.05,r+.05,this.gridSize-.1,this.gridSize-.1)}}this.container.style.backgroundImage="url("+e.toDataURL("image/png")+")"};t.prototype.getOpacity=function(){this.offset=this.offset<this.data.length?this.offset+1:0;return this.opacityScale(this.data.charCodeAt(this.offset))}})();(function(){"use strict";var e=0;var t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}})()